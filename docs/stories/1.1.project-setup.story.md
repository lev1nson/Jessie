# Story 1.1: Настройка проекта и базовая конфигурация облака

## Status
Draft

## Story
**As a** разработчик,
**I want** настроить структуру проекта (монорепозиторий) и инициализировать основные облачные сервисы,
**so that** у нас был фундамент для сборки и развертывания приложения.

## Acceptance Criteria
1. Создан монорепозиторий с папками-плейсхолдерами для backend и frontend.
2. Создана базовая конфигурация для бессерверной функции.
3. Настроен простейший CI/CD-пайплайн.

## Tasks / Subtasks
- [ ] Task 1: Создание структуры монорепозитория (AC: 1)
  - [ ] Создать корневую структуру папок согласно архитектуре
  - [ ] Настроить package.json для монорепозитория
  - [ ] Создать turbo.json для управления монорепо
  - [ ] Настроить TypeScript конфигурацию
- [ ] Task 2: Инициализация Next.js приложения (AC: 1)
  - [ ] Создать apps/web с Next.js 14.2
  - [ ] Настроить базовую структуру папок app/
  - [ ] Установить основные зависимости (shadcn/ui, Tailwind CSS, Zustand)
  - [ ] Настроить базовую конфигурацию Next.js
- [ ] Task 3: Настройка Supabase (AC: 1)
  - [ ] Создать apps/db для миграций
  - [ ] Инициализировать Supabase проект
  - [ ] Настроить базовые переменные окружения
- [ ] Task 4: Создание общих пакетов (AC: 1)
  - [ ] Создать packages/lib для общих типов и утилит
  - [ ] Создать packages/config для общих конфигураций
  - [ ] Настроить Supabase клиент
- [ ] Task 5: Настройка CI/CD пайплайна (AC: 3)
  - [ ] Создать .github/workflows для GitHub Actions
  - [ ] Настроить Vercel для автоматического деплоя
  - [ ] Настроить базовые тесты с Vitest
- [ ] Task 6: Документация и конфигурация (AC: 1, 2)
  - [ ] Создать .env.example с необходимыми переменными
  - [ ] Написать README.md с инструкциями по установке
  - [ ] Настроить ESLint и Prettier

## Dev Notes

### Previous Story Insights
Нет предыдущих историй - это первая история проекта.

### Data Models
[Source: docs/architecture/database-schema.md]
- Пока не требуется создание таблиц БД в этой истории
- Будет использоваться Supabase с PostgreSQL 15.x и pgvector ~0.7

### API Specifications
[Source: docs/architecture/api-specification.md]
- Пока не требуется создание API эндпоинтов в этой истории
- Будет использоваться Next.js API Routes ~14.2

### Component Specifications
[Source: docs/architecture/tech-stack.md]
- Frontend: Next.js ~14.2 с React
- UI компоненты: shadcn/ui ~0.8
- Стилизация: Tailwind CSS ~3.4
- State management: Zustand ~4.5

### File Locations
[Source: docs/architecture/project-structure.md]
```
jessie-email-assistant/
├── apps/
│   ├── web/                      # Основное Next.js приложение
│   │   ├── app/
│   │   │   ├── (chat)/           # Группа маршрутов для чата
│   │   │   ├── api/              # Backend API Routes
│   │   │   ├── auth/             # Маршруты аутентификации
│   │   │   └── layout.tsx        # Корневой макет
│   │   ├── components/
│   │   │   ├── features/         # Компоненты с бизнес-логикой
│   │   │   └── ui/               # Компоненты из shadcn/ui
│   │   └── lib/                  # Клиентские утилиты
│   └── db/                       # Конфигурация и миграции Supabase
├── packages/
│   ├── ui/                       # Общая UI-библиотека
│   ├── config/                   # Общие конфигурации
│   └── lib/                      # Общий код
│       ├── supabaseClient.ts     # Клиент Supabase
│       └── types.ts              # TypeScript-интерфейсы
├── .env.example                  # Пример переменных окружения
├── package.json                  # Корневой package.json
└── turbo.json                    # Конфигурация Turborepo
```

### Testing Requirements
[Source: docs/architecture/testing-strategy.md]
- **Unit/Integration тесты**: Vitest ~1.6
- **E2E тесты**: Playwright ~1.44
- **Frontend тесты**: Рядом с компонентами (Component.test.tsx)
- **Backend тесты**: В папке __tests__ рядом с API-маршрутами
- **E2E тесты**: В отдельной папке e2e в корне проекта

### Technical Constraints
[Source: docs/architecture/coding-standards.md]
- **Строгая типизация**: Все общие структуры данных должны использовать типы из packages/lib/types.ts
- **Переменные окружения**: Доступ к секретам — только через специальный конфигурационный модуль
- **Валидация данных**: Все данные в API-маршрутах должны быть проверены схемой Zod
- **Соглашения именования**:
  - Компоненты (React): PascalCase
  - Хуки (React): useCamelCase
  - Таблицы/колонки БД: snake_case
  - TypeScript Interfaces: PascalCase

### Security Considerations
- **Environment Variables**: Все секреты должны храниться в .env файлах, не коммититься в репозиторий
- **API Key Management**: API ключи должны быть разделены по окружениям (dev/staging/prod)
- **Configuration Module**: Создать централизованный модуль для управления конфигурацией
- **Access Control**: Настроить правильные права доступа для CI/CD пайплайнов
- **Secret Rotation**: Планировать ротацию секретов и API ключей

### Performance Considerations
- **Build Optimization**: Настроить Turborepo для кэширования и параллельной сборки
- **Development vs Production**: Разделить конфигурации для разработки и продакшена
- **Bundle Analysis**: Настроить анализ размера бандла для оптимизации
- **Caching Strategy**: Настроить кэширование для статических ресурсов
- **Development Server**: Оптимизировать hot reload и время сборки

### Testing
[Source: docs/architecture/testing-strategy.md]
- **Тест файлы**: Создавать рядом с компонентами (Component.test.tsx)
- **Фреймворк**: Vitest для unit/integration тестов
- **Библиотека**: React Testing Library для frontend тестов
- **Паттерны**: Следовать примерам из архитектуры
- **Локация**: Создать базовые тесты для проверки структуры проекта

## Change Log
| Date | Version | Description | Author |
| :---- | :---- | :---- | :---- |
| 24.07.2025 | 1.0 | Создание истории | Bob (SM) |
| 24.07.2025 | 1.1 | Добавление разделов безопасности и производительности | Bob (SM) |

## Dev Agent Record

### Agent Model Used
*Заполняется разработчиком*

### Debug Log References
*Заполняется разработчиком*

### Completion Notes List
*Заполняется разработчиком*

### File List
*Заполняется разработчиком*

## QA Results
*Заполняется QA агентом* 